import{_ as It}from"../chunks/D2gFui-Z.js";import"../chunks/Bzak7iHL.js";import{o as Nt}from"../chunks/C6qXeb9M.js";import{p as Ot,t as f,a as b,b as Bt,m as Lt,h as n,k as P,s,e as a,$ as Ft,r as t,g as v,n as Vt,o as Wt,u as Zt}from"../chunks/CpxVo7Xb.js";import{i as J}from"../chunks/C1oSKhUs.js";import{e as K,i as Q}from"../chunks/6RaR5WWk.js";import{h as qt}from"../chunks/FiqctlaF.js";import{s as zt}from"../chunks/CWn9fQy-.js";import{s as Gt}from"../chunks/Dj1_M-cw.js";import{s as Ht}from"../chunks/C2yMkv0y.js";import{b as k}from"../chunks/D-QOQs1b.js";import{S as w}from"../chunks/C5uhlMZ_.js";import{P as Jt}from"../chunks/D49RTWSx.js";import{B as Kt}from"../chunks/DlNLqZHT.js";import{g as C,a as D,m as yt}from"../chunks/DJc31okB.js";var Qt=P('<div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl"><div class="flex items-center gap-3"><div class="w-4 h-4 rounded-full"></div> <div><p class="font-medium text-slate-900"> </p> <p class="text-xs text-slate-500"> </p></div></div> <div class="text-right"><p class="font-bold text-slate-900"> </p> <p class="text-xs text-slate-500"> </p></div></div>'),Ut=P('<div class="p-4 bg-slate-50 rounded-xl"><div class="flex items-center justify-between mb-2"><span class="font-medium text-slate-900">Personas</span> <span class="font-bold text-primary-600"> </span></div> <div class="flex items-center justify-between text-sm text-slate-500"><span> </span> <span> </span></div></div>'),Xt=P('<div class="p-4 bg-slate-50 rounded-xl"><div class="flex items-center justify-between mb-2"><span class="font-medium text-slate-900">Empresas</span> <span class="font-bold text-blue-600"> </span></div> <div class="flex items-center justify-between text-sm text-slate-500"><span> </span> <span> </span></div></div>'),Yt=P('<div class="flex items-center justify-between p-2 text-sm"><span class="text-slate-600"> </span> <div class="text-right"><span class="font-medium text-slate-900"> </span> <span class="text-slate-400 ml-2"> </span></div></div>'),$t=P('<span class="block text-xs text-slate-500"> </span>'),ta=P('<tr><td><span></span></td><td><a class="font-medium text-slate-900 hover:text-primary-600 transition-colors"> </a> <!></td><td class="text-center"><!></td><td class="text-center"> </td><td class="text-right font-bold text-primary-600"> </td><td class="text-right text-slate-500"> </td></tr>'),aa=P('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"><div class="mb-8"><h1 class="page-title mb-2">Estad√≠sticas</h1> <p class="text-slate-600">An√°lisis detallado de la recaudaci√≥n y gastos del proyecto.</p></div> <div class="card p-6 mb-8"><h2 class="font-display font-semibold text-lg text-slate-800 mb-4">Progreso hacia la meta</h2> <!> <div class="mt-4 flex flex-wrap gap-4 text-sm"><div><span class="text-slate-500">Porcentaje:</span> <span class="font-bold text-primary-600 ml-1"> </span></div> <div><span class="text-slate-500">Faltante:</span> <span class="font-bold text-slate-700 ml-1"> </span></div></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-8"><!> <!> <!> <!> <!> <!></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"><div class="card p-6"><h2 class="font-display font-semibold text-lg text-slate-800 mb-4">Ingresos por Rubro</h2> <div class="h-80"><canvas></canvas></div></div> <div class="card p-6"><h2 class="font-display font-semibold text-lg text-slate-800 mb-4">Por M√©todo de Pago</h2> <div class="h-80"><canvas></canvas></div></div></div> <div class="card p-6 mb-8"><h2 class="font-display font-semibold text-lg text-slate-800 mb-4">Tendencia Ingresos vs Egresos (12 meses)</h2> <div class="h-80"><canvas></canvas></div></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"><div class="card p-6"><h2 class="font-display font-semibold text-lg text-slate-800 mb-4">Desglose por Rubro</h2> <div class="space-y-3"></div></div> <div class="card p-6"><h2 class="font-display font-semibold text-lg text-slate-800 mb-4">Por Tipo de Donante</h2> <div class="space-y-4"><!> <!></div> <h3 class="font-display font-semibold text-slate-800 mt-6 mb-4">Por M√©todo de Pago</h3> <div class="space-y-2"></div></div></div> <div class="card p-6"><h2 class="font-display font-semibold text-lg text-slate-800 mb-4">üèÜ Top 10 Donantes</h2> <div class="h-96"><canvas></canvas></div> <div class="mt-6 overflow-x-auto"><table class="table"><thead><tr><th class="w-12">#</th><th>Donante</th><th class="text-center">Tipo</th><th class="text-center">Donaciones</th><th class="text-right">Total</th><th class="text-right">%</th></tr></thead><tbody></tbody></table></div></div></div>');function ua(Pt,o){Ot(o,!0);let A,R,T,M;Nt(async()=>{const r=(await It(async()=>{const{default:e}=await import("../chunks/1QHMfHcL.js");return{default:e}},[],import.meta.url)).default;if(A&&o.data.rubroStats.length>0&&new r(A,{type:"doughnut",data:{labels:o.data.rubroStats.map(e=>e.nombre),datasets:[{data:o.data.rubroStats.map(e=>e.total),backgroundColor:o.data.rubroStats.map(e=>e.color),borderWidth:0,spacing:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}}),R&&o.data.topDonantes.length>0&&new r(R,{type:"bar",data:{labels:o.data.topDonantes.map(e=>e.nombreNegocio||e.nombre),datasets:[{label:"Total donado",data:o.data.topDonantes.map(e=>e.total),backgroundColor:"#22c55e",borderRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{grid:{display:!1}}}}}),T){const e=[...new Set([...o.data.ingresosPorMes.map(d=>d.mes),...o.data.egresosPorMes.map(d=>d.mes)])].sort(),i=e.map(d=>{const l=o.data.ingresosPorMes.find(m=>m.mes===d);return(l==null?void 0:l.total)||0}),c=e.map(d=>{const l=o.data.egresosPorMes.find(m=>m.mes===d);return(l==null?void 0:l.total)||0}),p=e.map(d=>{const[l,m]=d.split("-");return new Date(parseInt(l),parseInt(m)-1).toLocaleDateString("es",{month:"short",year:"2-digit"})});new r(T,{type:"line",data:{labels:p,datasets:[{label:"Ingresos",data:i,borderColor:"#22c55e",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!0,tension:.4},{label:"Egresos",data:c,borderColor:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0}}}})}if(M&&o.data.metodoStats.length>0){const e=["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"];new r(M,{type:"polarArea",data:{labels:o.data.metodoStats.map(i=>yt[i.metodo]||i.metodo),datasets:[{data:o.data.metodoStats.map(i=>i.total),backgroundColor:e.slice(0,o.data.metodoStats.length)}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})}});var j=aa();qt("1iknb9c",r=>{Lt(()=>{Ft.title="Estad√≠sticas - Patronato de Monterrey"})});var I=s(a(j),2),U=s(a(I),2);Jt(U,{get current(){return o.data.totales.ingresos},get goal(){return o.data.totales.metaProyecto},showLabels:!0});var X=s(U,2),N=a(X),Y=s(a(N),2),Et=a(Y);t(Y),t(N);var $=s(N,2),tt=s(a($),2),wt=a(tt,!0);t(tt),t($),t(X),t(I);var O=s(I,2),at=a(O);w(at,{title:"Total Ingresos",get value(){return o.data.totales.ingresos},icon:"üí∞",isCurrency:!0,color:"green"});var et=s(at,2);w(et,{title:"Total Egresos",get value(){return o.data.totales.egresos},icon:"üì§",isCurrency:!0,color:"red"});var st=s(et,2);w(st,{title:"Balance",get value(){return o.data.totales.balance},icon:"üìä",isCurrency:!0,color:"blue"});var ot=s(st,2);w(ot,{title:"Donantes",get value(){return o.data.totales.donantes},icon:"üë•",color:"purple"});var rt=s(ot,2);w(rt,{title:"Donaciones",get value(){return o.data.totales.donaciones},icon:"üéÅ",color:"yellow"});var Dt=s(rt,2);w(Dt,{title:"Promedio/Aporte",get value(){return o.data.totales.promedioAporte},icon:"üìà",isCurrency:!0,color:"green"}),t(O);var B=s(O,2),L=a(B),lt=s(a(L),2),St=a(lt);k(St,r=>A=r,()=>A),t(lt),t(L);var it=s(L,2),dt=s(a(it),2),Ct=a(dt);k(Ct,r=>M=r,()=>M),t(dt),t(it),t(B);var F=s(B,2),nt=s(a(F),2),At=a(nt);k(At,r=>T=r,()=>T),t(nt),t(F);var V=s(F,2),W=a(V),vt=s(a(W),2);K(vt,21,()=>o.data.rubroStats.filter(r=>r.total>0),Q,(r,e)=>{var i=Qt(),c=a(i),p=a(c),d=s(p,2),l=a(d),m=a(l,!0);t(l);var g=s(l,2),u=a(g);t(g),t(d),t(c);var x=s(c,2),_=a(x),z=a(_,!0);t(_);var E=s(_,2),G=a(E);t(E),t(x),t(i),f((S,H)=>{Ht(p,`background-color: ${v(e).color??""}`),n(m,v(e).nombre),n(u,`${v(e).cantidad??""} donaciones`),n(z,S),n(G,`${H??""}%`)},[()=>D(v(e).total),()=>C(v(e).total,o.data.totales.ingresos)]),b(r,i)}),t(vt),t(W);var ct=s(W,2),Z=s(a(ct),2),mt=a(Z);{var Rt=r=>{var e=Ut(),i=a(e),c=s(a(i),2),p=a(c,!0);t(c),t(i);var d=s(i,2),l=a(d),m=a(l);t(l);var g=s(l,2),u=a(g);t(g),t(d),t(e),f((x,_)=>{n(p,x),n(m,`${o.data.porTipoDonante.PERSONA.cantidad??""} donaciones`),n(u,`${_??""}%`)},[()=>D(o.data.porTipoDonante.PERSONA.total),()=>C(o.data.porTipoDonante.PERSONA.total,o.data.totales.ingresos)]),b(r,e)};J(mt,r=>{o.data.porTipoDonante.PERSONA&&r(Rt)})}var Tt=s(mt,2);{var Mt=r=>{var e=Xt(),i=a(e),c=s(a(i),2),p=a(c,!0);t(c),t(i);var d=s(i,2),l=a(d),m=a(l);t(l);var g=s(l,2),u=a(g);t(g),t(d),t(e),f((x,_)=>{n(p,x),n(m,`${o.data.porTipoDonante.EMPRESA.cantidad??""} donaciones`),n(u,`${_??""}%`)},[()=>D(o.data.porTipoDonante.EMPRESA.total),()=>C(o.data.porTipoDonante.EMPRESA.total,o.data.totales.ingresos)]),b(r,e)};J(Tt,r=>{o.data.porTipoDonante.EMPRESA&&r(Mt)})}t(Z);var pt=s(Z,4);K(pt,21,()=>o.data.metodoStats,Q,(r,e)=>{var i=Yt(),c=a(i),p=a(c,!0);t(c);var d=s(c,2),l=a(d),m=a(l,!0);t(l);var g=s(l,2),u=a(g);t(g),t(d),t(i),f(x=>{n(p,yt[v(e).metodo]||v(e).metodo),n(m,x),n(u,`(${v(e).cantidad??""})`)},[()=>D(v(e).total)]),b(r,i)}),t(pt),t(ct),t(V);var gt=s(V,2),q=s(a(gt),2),kt=a(q);k(kt,r=>R=r,()=>R),t(q);var _t=s(q,2),xt=a(_t),ut=s(a(xt));K(ut,21,()=>o.data.topDonantes,Q,(r,e,i)=>{var c=ta(),p=a(c),d=a(p);Gt(d,1,`w-8 h-8 rounded-full ${i<3?"bg-yellow-100 text-yellow-700":"bg-slate-100 text-slate-600"} flex items-center justify-center text-sm font-bold`),d.textContent=i+1,t(p);var l=s(p),m=a(l),g=a(m,!0);t(m);var u=s(m,2);{var x=h=>{var y=$t(),bt=a(y,!0);t(y),f(()=>n(bt,v(e).nombre)),b(h,y)};J(u,h=>{v(e).nombreNegocio&&h(x)})}t(l);var _=s(l),z=a(_);{let h=Zt(()=>v(e).tipo==="EMPRESA"?"info":"default");Kt(z,{get variant(){return v(h)},children:(y,bt)=>{Vt();var ht=Wt();f(()=>n(ht,v(e).tipo==="EMPRESA"?"Empresa":"Persona")),b(y,ht)},$$slots:{default:!0}})}t(_);var E=s(_),G=a(E,!0);t(E);var S=s(E),H=a(S,!0);t(S);var ft=s(S),jt=a(ft);t(ft),t(c),f((h,y)=>{zt(m,"href",`/donante/${v(e).id??""}`),n(g,v(e).nombreNegocio||v(e).nombre),n(G,v(e).donaciones),n(H,h),n(jt,`${y??""}%`)},[()=>D(v(e).total),()=>C(v(e).total,o.data.totales.ingresos)]),b(r,c)}),t(ut),t(xt),t(_t),t(gt),t(j),f((r,e)=>{n(Et,`${r??""}%`),n(wt,e)},[()=>C(o.data.totales.ingresos,o.data.totales.metaProyecto),()=>D(Math.max(0,o.data.totales.metaProyecto-o.data.totales.ingresos))]),b(Pt,j),Bt()}export{ua as component};
