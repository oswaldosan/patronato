{"version":3,"file":"hooks.server-DcLEPsYh.js","sources":["../../../.svelte-kit/adapter-node/entries/hooks.server.js"],"sourcesContent":["import { b as getUserFromToken } from \"../chunks/auth.js\";\nconst handle = async ({ event, resolve }) => {\n  event.locals.user = null;\n  const token = event.cookies.get(\"auth_token\");\n  if (token) {\n    const user = await getUserFromToken(token);\n    if (user && user.activo) {\n      event.locals.user = {\n        id: user.id,\n        email: user.email,\n        name: user.name,\n        role: user.role\n      };\n    } else {\n      event.cookies.delete(\"auth_token\", { path: \"/\" });\n    }\n  }\n  return resolve(event);\n};\nexport {\n  handle\n};\n"],"names":[],"mappings":";;;;;;;AACK,MAAC,MAAM,GAAG,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK;AAC7C,EAAE,KAAK,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI;AAC1B,EAAE,MAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC;AAC/C,EAAE,IAAI,KAAK,EAAE;AACb,IAAI,MAAM,IAAI,GAAG,MAAM,gBAAgB,CAAC,KAAK,CAAC;AAC9C,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;AAC7B,MAAM,KAAK,CAAC,MAAM,CAAC,IAAI,GAAG;AAC1B,QAAQ,EAAE,EAAE,IAAI,CAAC,EAAE;AACnB,QAAQ,KAAK,EAAE,IAAI,CAAC,KAAK;AACzB,QAAQ,IAAI,EAAE,IAAI,CAAC,IAAI;AACvB,QAAQ,IAAI,EAAE,IAAI,CAAC;AACnB,OAAO;AACP,IAAI,CAAC,MAAM;AACX,MAAM,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC;AACvD,IAAI;AACJ,EAAE;AACF,EAAE,OAAO,OAAO,CAAC,KAAK,CAAC;AACvB;;;;"}