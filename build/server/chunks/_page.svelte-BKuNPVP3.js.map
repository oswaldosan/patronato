{"version":3,"file":"_page.svelte-BKuNPVP3.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/admin/usuarios/_page.svelte.js"],"sourcesContent":["import { d as escape_html, e as ensure_array_like, b as attr_class, a as attr, j as bind_props } from \"../../../../chunks/index2.js\";\nfunction _page($$renderer, $$props) {\n  $$renderer.component(($$renderer2) => {\n    let lastUpdatedLabel;\n    let data = $$props[\"data\"];\n    const dateFormatter = new Intl.DateTimeFormat(\"es-HN\", { dateStyle: \"medium\" });\n    const dateTimeFormatter = new Intl.DateTimeFormat(\"es-HN\", { dateStyle: \"medium\", timeStyle: \"short\" });\n    const roleStyles = {\n      ADMIN: {\n        label: \"Administrador\",\n        classes: \"bg-primary-50 text-primary-700 border border-primary-100\"\n      },\n      VIEWER: {\n        label: \"Consulta\",\n        classes: \"bg-slate-100 text-slate-700 border border-slate-200\"\n      }\n    };\n    const adminCount = data.stats.total - data.stats.viewers;\n    const statCards = [\n      {\n        label: \"Usuarios totales\",\n        value: data.stats.total,\n        accent: \"text-slate-900\",\n        helper: \"Registros en el sistema\"\n      },\n      {\n        label: \"Activos\",\n        value: data.stats.activos,\n        accent: \"text-green-600\",\n        helper: \"Pueden iniciar sesi칩n\"\n      },\n      {\n        label: \"Inactivos\",\n        value: data.stats.inactivos,\n        accent: \"text-amber-600\",\n        helper: \"Acceso suspendido\"\n      },\n      {\n        label: \"Administradores\",\n        value: adminCount,\n        accent: \"text-primary-600\",\n        helper: \"Con rol completo\"\n      }\n    ];\n    const formatDate = (value) => dateFormatter.format(new Date(value));\n    lastUpdatedLabel = dateTimeFormatter.format(new Date(data.generatedAt));\n    $$renderer2.push(`<section class=\"mb-8\"><div class=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\"><div><p class=\"text-sm font-semibold text-primary-600 uppercase tracking-wide\">Control de accesos</p> <h1 class=\"page-title\">Usuarios administrativos</h1> <p class=\"text-sm text-slate-500 mt-2\">Registra y administra las personas autorizadas para cargar aportes, egresos y reportes.</p></div> <div class=\"bg-white border border-slate-200 rounded-2xl px-5 py-4 shadow-sm\"><p class=\"text-xs font-semibold text-slate-500 uppercase tracking-wide\">칔ltima actualizaci칩n</p> <p class=\"text-lg font-display text-slate-900\">${escape_html(lastUpdatedLabel)}</p></div></div></section> <section class=\"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 mb-8\"><!--[-->`);\n    const each_array = ensure_array_like(statCards);\n    for (let $$index = 0, $$length = each_array.length; $$index < $$length; $$index++) {\n      let stat = each_array[$$index];\n      $$renderer2.push(`<article class=\"stat-card\"><p class=\"text-xs font-semibold text-slate-500 uppercase tracking-wide\">${escape_html(stat.label)}</p> <p${attr_class(`stat-value mt-2 ${stat.accent}`)}>${escape_html(stat.value)}</p> <p class=\"stat-label\">${escape_html(stat.helper)}</p></article>`);\n    }\n    $$renderer2.push(`<!--]--></section> <section class=\"card p-6 mb-10\"><div class=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6\"><div><h2 class=\"section-title\">Crear nuevo usuario</h2> <p class=\"text-sm text-slate-500\">Comparte el acceso institucional sin exponer la contrase침a maestra.</p></div> <p class=\"text-xs text-slate-400 bg-slate-100 rounded-full px-4 py-1 inline-flex items-center gap-1\">游댏 Contrase침as se guardan cifradas autom치ticamente</p></div> <form method=\"POST\" action=\"?/create\" class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\"><div><label class=\"label\" for=\"name\">Nombre completo</label> <input id=\"name\" name=\"name\" placeholder=\"Ej. Mar칤a Fern치ndez\" required=\"\" class=\"input\"/></div> <div><label class=\"label\" for=\"email\">Correo institucional</label> <input id=\"email\" name=\"email\" type=\"email\" placeholder=\"correo@comite.org\" required=\"\" class=\"input\"/></div> <div><label class=\"label\" for=\"password\">Contrase침a temporal</label> <input id=\"password\" name=\"password\" type=\"password\" minlength=\"8\" placeholder=\"M칤nimo 8 caracteres\" required=\"\" class=\"input\"/></div> <div><label class=\"label\" for=\"role\">Tipo de acceso</label> <select id=\"role\" name=\"role\" class=\"select\">`);\n    $$renderer2.option({ value: \"ADMIN\" }, ($$renderer3) => {\n      $$renderer3.push(`Administraci칩n completa`);\n    });\n    $$renderer2.option({ value: \"VIEWER\" }, ($$renderer3) => {\n      $$renderer3.push(`Solo consulta`);\n    });\n    $$renderer2.push(`</select></div> <div class=\"md:col-span-2 lg:col-span-4 flex flex-col sm:flex-row gap-3\"><button type=\"submit\" class=\"btn btn-primary flex-1\">Registrar usuario</button> <p class=\"text-xs text-slate-400 flex items-center\">Se enviar치 la contrase침a temporal por el canal que definas.</p></div></form></section> <section><div class=\"flex items-center justify-between mb-4\"><h2 class=\"section-title\">Listado de usuarios</h2> <span class=\"text-sm text-slate-500\">${escape_html(data.users.length)} registros</span></div> `);\n    if (data.users.length === 0) {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.push(`<div class=\"card p-8 text-center text-slate-500\">No hay usuarios registrados a칰n. Utiliza el formulario superior para crear el primero.</div>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n      $$renderer2.push(`<div class=\"table-container\"><table class=\"table\"><thead><tr><th>Nombre</th><th>Correo</th><th>Rol</th><th>Estado</th><th>Creado</th><th>Acciones</th></tr></thead><tbody><!--[-->`);\n      const each_array_1 = ensure_array_like(data.users);\n      for (let $$index_1 = 0, $$length = each_array_1.length; $$index_1 < $$length; $$index_1++) {\n        let u = each_array_1[$$index_1];\n        $$renderer2.push(`<tr><td><p class=\"font-semibold text-slate-900\">${escape_html(u.name)}</p> <p class=\"text-xs text-slate-500\">ID: ${escape_html(u.id)}</p></td><td><p>${escape_html(u.email)}</p> <p class=\"text-xs text-slate-400\">칔ltimo cambio: ${escape_html(formatDate(u.createdAt))}</p></td><td><span${attr_class(`badge ${roleStyles[u.role].classes}`)}>${escape_html(roleStyles[u.role].label)}</span></td><td><span${attr_class(`badge ${u.activo ? \"badge-success\" : \"badge-warning\"}`)}>${escape_html(u.activo ? \"Activo\" : \"Inactivo\")}</span></td><td>${escape_html(formatDate(u.createdAt))}</td><td><div class=\"flex flex-col gap-2 min-w-[220px]\"><form method=\"POST\" action=\"?/toggleActive\" class=\"flex gap-2 items-center\"><input type=\"hidden\" name=\"id\"${attr(\"value\", u.id)}/> <button type=\"submit\"${attr_class(`btn btn-sm ${u.activo ? \"btn-secondary\" : \"btn-primary\"}`)}>${escape_html(u.activo ? \"Desactivar\" : \"Activar\")}</button></form> <form method=\"POST\" action=\"?/resetPassword\" class=\"flex gap-2 items-center\"><input type=\"hidden\" name=\"id\"${attr(\"value\", u.id)}/> <input name=\"password\" type=\"password\" minlength=\"8\" placeholder=\"Nueva contrase침a\" required=\"\" class=\"input\"/> <button type=\"submit\" class=\"btn btn-sm btn-outline\">Actualizar</button></form></div></td></tr>`);\n      }\n      $$renderer2.push(`<!--]--></tbody></table></div>`);\n    }\n    $$renderer2.push(`<!--]--></section>`);\n    bind_props($$props, { data });\n  });\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}