{"version":3,"file":"16-BnH8wj6u.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/admin/login/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/16.js"],"sourcesContent":["import { fail, redirect } from \"@sveltejs/kit\";\nimport { a as authenticateUser, g as generateToken } from \"../../../../chunks/auth.js\";\nimport { l as loginSchema } from \"../../../../chunks/validations.js\";\nconst load = async () => {\n  return {};\n};\nconst actions = {\n  default: async ({ request, cookies }) => {\n    const formData = await request.formData();\n    const email = formData.get(\"email\");\n    const password = formData.get(\"password\");\n    const result = loginSchema.safeParse({ email, password });\n    if (!result.success) {\n      const message = result.error.issues[0]?.message ?? \"Datos inválidos\";\n      return fail(400, {\n        error: message,\n        email\n      });\n    }\n    const user = await authenticateUser(email, password);\n    if (!user) {\n      return fail(401, {\n        error: \"Credenciales inválidas\",\n        email\n      });\n    }\n    const token = generateToken(user);\n    cookies.set(\"auth_token\", token, {\n      path: \"/\",\n      httpOnly: true,\n      secure: process.env.NODE_ENV === \"production\",\n      sameSite: \"lax\",\n      maxAge: 60 * 60 * 24 * 7\n      // 7 días\n    });\n    throw redirect(302, \"/admin\");\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/admin/login/_page.server.ts.js';\n\nexport const index = 16;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/admin/login/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/admin/login/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/16.B60jDIMP.js\",\"_app/immutable/chunks/Bzak7iHL.js\",\"_app/immutable/chunks/CpxVo7Xb.js\",\"_app/immutable/chunks/C1oSKhUs.js\",\"_app/immutable/chunks/FiqctlaF.js\",\"_app/immutable/chunks/DwtWQrsL.js\",\"_app/immutable/chunks/CQlYeRKf.js\",\"_app/immutable/chunks/C6qXeb9M.js\",\"_app/immutable/chunks/CWn9fQy-.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":";;;;;;;;;;AAGA,MAAM,IAAI,GAAG,YAAY;AACzB,EAAE,OAAO,EAAE;AACX,CAAC;AACD,MAAM,OAAO,GAAG;AAChB,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK;AAC3C,IAAI,MAAM,QAAQ,GAAG,MAAM,OAAO,CAAC,QAAQ,EAAE;AAC7C,IAAI,MAAM,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC;AACvC,IAAI,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC;AAC7C,IAAI,MAAM,MAAM,GAAG,WAAW,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC;AAC7D,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;AACzB,MAAM,MAAM,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,OAAO,IAAI,iBAAiB;AAC1E,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE;AACvB,QAAQ,KAAK,EAAE,OAAO;AACtB,QAAQ;AACR,OAAO,CAAC;AACR,IAAI;AACJ,IAAI,MAAM,IAAI,GAAG,MAAM,gBAAgB,CAAC,KAAK,EAAE,QAAQ,CAAC;AACxD,IAAI,IAAI,CAAC,IAAI,EAAE;AACf,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE;AACvB,QAAQ,KAAK,EAAE,wBAAwB;AACvC,QAAQ;AACR,OAAO,CAAC;AACR,IAAI;AACJ,IAAI,MAAM,KAAK,GAAG,aAAa,CAAC,IAAI,CAAC;AACrC,IAAI,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,KAAK,EAAE;AACrC,MAAM,IAAI,EAAE,GAAG;AACf,MAAM,QAAQ,EAAE,IAAI;AACpB,MAAM,MAAM,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY;AACnD,MAAM,QAAQ,EAAE,KAAK;AACrB,MAAM,MAAM,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;AAC7B;AACA,KAAK,CAAC;AACN,IAAI,MAAM,QAAQ,CAAC,GAAG,EAAE,QAAQ,CAAC;AACjC,EAAE;AACF,CAAC;;;;;;;;ACnCW,MAAC,KAAK,GAAG;AACrB,IAAI,eAAe;AACP,MAAC,SAAS,GAAG,YAAY,eAAe,KAAK,CAAC,MAAM,OAAO,4BAA8C,CAAC,EAAE;AAE5G,MAAC,SAAS,GAAG;AACb,MAAC,OAAO,GAAG,CAAC,qCAAqC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC;AACjV,MAAC,WAAW,GAAG;AACf,MAAC,KAAK,GAAG;;;;"}