{"version":3,"file":"_page.svelte-B02FSxqU.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/admin/donantes/_id_/_page.svelte.js"],"sourcesContent":["import { h as head, d as escape_html, a as attr, s as stringify, e as ensure_array_like } from \"../../../../../chunks/index2.js\";\nimport \"@sveltejs/kit/internal\";\nimport \"../../../../../chunks/exports.js\";\nimport \"../../../../../chunks/utils.js\";\nimport \"@sveltejs/kit/internal/server\";\nimport \"../../../../../chunks/root.js\";\nimport \"../../../../../chunks/state.svelte.js\";\nimport { B as Badge } from \"../../../../../chunks/Badge.js\";\nimport { f as formatCurrency, b as formatDateShort, e as estadoAporteLabels } from \"../../../../../chunks/format.js\";\nfunction _page($$renderer, $$props) {\n  $$renderer.component(($$renderer2) => {\n    let { data, form } = $$props;\n    let loading = false;\n    let tipo = data.donante.tipo;\n    const estadoVariant = (estado) => {\n      switch (estado) {\n        case \"VERIFICADO\":\n          return \"success\";\n        case \"PENDIENTE\":\n          return \"warning\";\n        case \"ANULADO\":\n          return \"danger\";\n        default:\n          return \"default\";\n      }\n    };\n    head(\"8u2la7\", $$renderer2, ($$renderer3) => {\n      $$renderer3.title(($$renderer4) => {\n        $$renderer4.push(`<title>Editar ${escape_html(data.donante.nombreNegocio || data.donante.nombre)} - Admin</title>`);\n      });\n    });\n    $$renderer2.push(`<div class=\"max-w-4xl mx-auto\"><div class=\"mb-8\"><a href=\"/admin/donantes\" class=\"text-sm text-slate-600 hover:text-primary-600 mb-2 inline-block\">← Volver a donantes</a> <div class=\"flex items-center justify-between\"><h1 class=\"page-title\">Editar Donante</h1> <button class=\"btn btn-danger btn-sm\">Eliminar</button></div></div> `);\n    if (form?.error) {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.push(`<div class=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm\">${escape_html(form.error)}</div>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n    }\n    $$renderer2.push(`<!--]--> `);\n    if (form?.success) {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.push(`<div class=\"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl text-green-700 text-sm\">Donante actualizado correctamente</div>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n    }\n    $$renderer2.push(`<!--]--> <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\"><div class=\"lg:col-span-2\"><form method=\"POST\" action=\"?/update\" class=\"card p-6 space-y-6\"><div><label class=\"label\">Tipo de donante</label> <div class=\"flex gap-4\"><label class=\"flex items-center gap-2 cursor-pointer\"><input type=\"radio\" name=\"tipo\" value=\"PERSONA\"${attr(\"checked\", tipo === \"PERSONA\", true)} class=\"w-4 h-4 text-primary-600\"/> <span>Persona</span></label> <label class=\"flex items-center gap-2 cursor-pointer\"><input type=\"radio\" name=\"tipo\" value=\"EMPRESA\"${attr(\"checked\", tipo === \"EMPRESA\", true)} class=\"w-4 h-4 text-primary-600\"/> <span>Empresa</span></label></div></div> <div><label for=\"nombre\" class=\"label\">${escape_html(tipo === \"EMPRESA\" ? \"Nombre del representante\" : \"Nombre completo\")} *</label> <input type=\"text\" id=\"nombre\" name=\"nombre\"${attr(\"value\", data.donante.nombre)} class=\"input\" required=\"\"/></div> <div><label for=\"identificacion\" class=\"label\">Identidad / RTN *</label> <input type=\"text\" id=\"identificacion\" name=\"identificacion\"${attr(\"value\", data.donante.identificacion)} class=\"input\" required=\"\"/> <p class=\"text-xs text-slate-500 mt-1\">Debe coincidir con el documento oficial.</p></div> `);\n    if (tipo === \"EMPRESA\") {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.push(`<div><label for=\"nombreNegocio\" class=\"label\">Nombre del negocio/empresa</label> <input type=\"text\" id=\"nombreNegocio\" name=\"nombreNegocio\"${attr(\"value\", data.donante.nombreNegocio ?? \"\")} class=\"input\"/></div>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n    }\n    $$renderer2.push(`<!--]--> <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4\"><div><label for=\"telefono\" class=\"label\">Teléfono</label> <input type=\"tel\" id=\"telefono\" name=\"telefono\"${attr(\"value\", data.donante.telefono ?? \"\")} class=\"input\"/></div> <div><label for=\"email\" class=\"label\">Email</label> <input type=\"email\" id=\"email\" name=\"email\"${attr(\"value\", data.donante.email ?? \"\")} class=\"input\"/></div></div> <div><label for=\"direccion\" class=\"label\">Dirección</label> <input type=\"text\" id=\"direccion\" name=\"direccion\"${attr(\"value\", data.donante.direccion ?? \"\")} class=\"input\"/></div> <div><label for=\"notas\" class=\"label\">Notas</label> <textarea id=\"notas\" name=\"notas\" rows=\"3\" class=\"input\">`);\n    const $$body = escape_html(data.donante.notas ?? \"\");\n    if ($$body) {\n      $$renderer2.push(`${$$body}`);\n    }\n    $$renderer2.push(`</textarea></div> <div><label class=\"flex items-center gap-2 cursor-pointer\"><input type=\"checkbox\" name=\"activo\"${attr(\"checked\", data.donante.activo, true)} class=\"w-4 h-4 rounded text-primary-600\"/> <span class=\"text-sm font-medium\">Donante activo</span></label></div> <div class=\"flex justify-end gap-3 pt-4 border-t border-slate-200\"><button type=\"submit\" class=\"btn btn-primary\"${attr(\"disabled\", loading, true)}>${escape_html(\"Guardar Cambios\")}</button></div></form></div> <div class=\"space-y-6\"><div class=\"card p-6\"><h3 class=\"font-display font-semibold text-slate-800 mb-4\">Resumen</h3> <div class=\"space-y-4\"><div><p class=\"text-sm text-slate-500\">Total donado</p> <p class=\"text-2xl font-bold text-primary-600\">${escape_html(formatCurrency(data.totalDonado))}</p></div> <div><p class=\"text-sm text-slate-500\">Total aportes</p> <p class=\"text-lg font-semibold text-slate-900\">${escape_html(data.aportes.length)}</p></div></div> <div class=\"mt-4 pt-4 border-t border-slate-200\"><a${attr(\"href\", `/admin/aportes/nuevo?donante=${stringify(data.donante.id)}`)} class=\"btn btn-primary w-full\">+ Nuevo Aporte</a></div></div> <div class=\"card overflow-hidden\"><div class=\"px-6 py-4 border-b border-slate-200\"><h3 class=\"font-display font-semibold text-slate-800\">Historial</h3></div> `);\n    if (data.aportes.length === 0) {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.push(`<div class=\"p-6 text-center text-slate-500 text-sm\">Sin aportes registrados</div>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n      $$renderer2.push(`<div class=\"divide-y divide-slate-100 max-h-96 overflow-y-auto\"><!--[-->`);\n      const each_array = ensure_array_like(data.aportes);\n      for (let $$index = 0, $$length = each_array.length; $$index < $$length; $$index++) {\n        let aporte = each_array[$$index];\n        $$renderer2.push(`<a${attr(\"href\", `/admin/aportes/${stringify(aporte.id)}`)} class=\"block p-4 hover:bg-slate-50 transition-colors\"><div class=\"flex items-center justify-between\"><div><p class=\"text-sm text-slate-500\">${escape_html(formatDateShort(aporte.fecha))}</p> <p class=\"text-xs text-slate-400\">${escape_html(aporte.rubro)}</p></div> <div class=\"text-right\"><p class=\"font-bold text-slate-900\">${escape_html(formatCurrency(aporte.monto))}</p> `);\n        Badge($$renderer2, {\n          variant: estadoVariant(aporte.estado),\n          children: ($$renderer3) => {\n            $$renderer3.push(`<!---->${escape_html(estadoAporteLabels[aporte.estado])}`);\n          }\n        });\n        $$renderer2.push(`<!----></div></div></a>`);\n      }\n      $$renderer2.push(`<!--]--></div>`);\n    }\n    $$renderer2.push(`<!--]--></div></div></div></div> `);\n    {\n      $$renderer2.push(\"<!--[!-->\");\n    }\n    $$renderer2.push(`<!--]-->`);\n  });\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":";;;;;;AASA,SAAS,KAAK,CAAC,UAAU,EAAE,OAAO,EAAE;AACpC,EAAE,UAAU,CAAC,SAAS,CAAC,CAAC,WAAW,KAAK;AACxC,IAAI,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,OAAO;AAChC,IAAI,IAAI,OAAO,GAAG,KAAK;AACvB,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI;AAChC,IAAI,MAAM,aAAa,GAAG,CAAC,MAAM,KAAK;AACtC,MAAM,QAAQ,MAAM;AACpB,QAAQ,KAAK,YAAY;AACzB,UAAU,OAAO,SAAS;AAC1B,QAAQ,KAAK,WAAW;AACxB,UAAU,OAAO,SAAS;AAC1B,QAAQ,KAAK,SAAS;AACtB,UAAU,OAAO,QAAQ;AACzB,QAAQ;AACR,UAAU,OAAO,SAAS;AAC1B;AACA,IAAI,CAAC;AACL,IAAI,IAAI,CAAC,QAAQ,EAAE,WAAW,EAAE,CAAC,WAAW,KAAK;AACjD,MAAM,WAAW,CAAC,KAAK,CAAC,CAAC,WAAW,KAAK;AACzC,QAAQ,WAAW,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,gBAAgB,CAAC,CAAC;AAC3H,MAAM,CAAC,CAAC;AACR,IAAI,CAAC,CAAC;AACN,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,yUAAyU,CAAC,CAAC;AACjW,IAAI,IAAI,IAAI,EAAE,KAAK,EAAE;AACrB,MAAM,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC;AAClC,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC,sFAAsF,EAAE,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC;AAChJ,IAAI,CAAC,MAAM;AACX,MAAM,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC;AACnC,IAAI;AACJ,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC;AACjC,IAAI,IAAI,IAAI,EAAE,OAAO,EAAE;AACvB,MAAM,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC;AAClC,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC,mIAAmI,CAAC,CAAC;AAC7J,IAAI,CAAC,MAAM;AACX,MAAM,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC;AACnC,IAAI;AACJ,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,uUAAuU,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,KAAK,SAAS,EAAE,IAAI,CAAC,CAAC,sKAAsK,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,KAAK,SAAS,EAAE,IAAI,CAAC,CAAC,oHAAoH,EAAE,WAAW,CAAC,IAAI,KAAK,SAAS,GAAG,0BAA0B,GAAG,iBAAiB,CAAC,CAAC,uDAAuD,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,wKAAwK,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,uHAAuH,CAAC,CAAC;AAC5sC,IAAI,IAAI,IAAI,KAAK,SAAS,EAAE;AAC5B,MAAM,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC;AAClC,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC,2IAA2I,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,aAAa,IAAI,EAAE,CAAC,CAAC,sBAAsB,CAAC,CAAC;AAC7O,IAAI,CAAC,MAAM;AACX,MAAM,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC;AACnC,IAAI;AACJ,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,qKAAqK,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC,sHAAsH,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,2IAA2I,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC,oIAAoI,CAAC,CAAC;AACvsB,IAAI,MAAM,MAAM,GAAG,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,EAAE,CAAC;AACxD,IAAI,IAAI,MAAM,EAAE;AAChB,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;AACnC,IAAI;AACJ,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,iHAAiH,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,kOAAkO,EAAE,IAAI,CAAC,UAAU,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,iBAAiB,CAAC,CAAC,gRAAgR,EAAE,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,oHAAoH,EAAE,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,oEAAoE,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,6BAA6B,EAAE,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,6NAA6N,CAAC,CAAC;AACjyC,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;AACnC,MAAM,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC;AAClC,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC,iFAAiF,CAAC,CAAC;AAC3G,IAAI,CAAC,MAAM;AACX,MAAM,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC;AACnC,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC,wEAAwE,CAAC,CAAC;AAClG,MAAM,MAAM,UAAU,GAAG,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC;AACxD,MAAM,KAAK,IAAI,OAAO,GAAG,CAAC,EAAE,QAAQ,GAAG,UAAU,CAAC,MAAM,EAAE,OAAO,GAAG,QAAQ,EAAE,OAAO,EAAE,EAAE;AACzF,QAAQ,IAAI,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC;AACxC,QAAQ,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,eAAe,EAAE,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,6IAA6I,EAAE,WAAW,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,uCAAuC,EAAE,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,uEAAuE,EAAE,WAAW,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;AAC5c,QAAQ,KAAK,CAAC,WAAW,EAAE;AAC3B,UAAU,OAAO,EAAE,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC;AAC/C,UAAU,QAAQ,EAAE,CAAC,WAAW,KAAK;AACrC,YAAY,WAAW,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,WAAW,CAAC,kBAAkB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AACxF,UAAU;AACV,SAAS,CAAC;AACV,QAAQ,WAAW,CAAC,IAAI,CAAC,CAAC,uBAAuB,CAAC,CAAC;AACnD,MAAM;AACN,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC;AACxC,IAAI;AACJ,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,iCAAiC,CAAC,CAAC;AACzD,IAAI;AACJ,MAAM,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC;AACnC,IAAI;AACJ,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC;AAChC,EAAE,CAAC,CAAC;AACJ;;;;"}