import"../chunks/Bzak7iHL.js";import{p as le,t as p,a as u,b as se,m as de,e as r,s as o,g as d,h as b,k as _,l as ne,$ as ve,r as t,n as ce,j as U}from"../chunks/CpxVo7Xb.js";import{i as me}from"../chunks/C1oSKhUs.js";import{e as W,i as X}from"../chunks/6RaR5WWk.js";import{h as pe}from"../chunks/FiqctlaF.js";import{a as ue,e as be}from"../chunks/DwtWQrsL.js";import{a as Y,r as Z}from"../chunks/CWn9fQy-.js";import{i as $,s as ee}from"../chunks/DwYBmEoc.js";var _e=_('<div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm"> </div>'),fe=_("<option> </option>"),ge=_("<option> </option>"),he=_('<div class="max-w-2xl mx-auto"><div class="mb-8"><a href="/admin/egresos" class="text-sm text-slate-600 hover:text-primary-600 mb-2 inline-block">← Volver a egresos</a> <h1 class="page-title">Registrar Egreso</h1></div> <!> <form method="POST" class="card p-6 space-y-6"><div><label for="concepto" class="label">Concepto / Descripción *</label> <input type="text" id="concepto" name="concepto" class="input" placeholder="Ej: Compra de materiales, pago de mano de obra..." required=""/></div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div><label for="fecha" class="label">Fecha *</label> <input type="date" id="fecha" name="fecha" class="input" required=""/></div> <div><label for="monto" class="label">Monto *</label> <input type="number" id="monto" name="monto" step="0.01" min="0.01" class="input" placeholder="0.00" required=""/></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div><label for="rubroId" class="label">Rubro / Categoría *</label> <select id="rubroId" name="rubroId" class="select" required=""><option disabled="" hidden="">Selecciona un rubro</option><!></select></div> <div><label for="proveedorId" class="label">Proveedor</label> <select id="proveedorId" name="proveedorId" class="select"><option>Sin proveedor registrado</option><!></select></div></div> <div><label for="referencia" class="label">Número de factura/comprobante <span class="text-slate-400 font-normal">(privado)</span></label> <input type="text" id="referencia" name="referencia" class="input" placeholder="Número de factura, recibo, etc."/></div> <div><label for="notas" class="label">Notas</label> <textarea id="notas" name="notas" rows="2" class="input" placeholder="Notas adicionales..."></textarea></div> <div><label for="estado" class="label">Estado inicial</label> <select id="estado" name="estado" class="select"><option>Pendiente de verificación</option><option>Verificado</option></select></div> <div class="flex justify-end gap-3 pt-4 border-t border-slate-200"><a href="/admin/egresos" class="btn btn-secondary">Cancelar</a> <button type="submit" class="btn btn-primary"> </button></div></form></div>');function qe(ae,l){le(l,!0);let m=ne(!1);var f=he();pe("17erdkn",i=>{de(()=>{ve.title="Nuevo Egreso - Admin"})});var q=o(r(f),2);{var re=i=>{var e=_e(),a=r(e,!0);t(e),p(()=>b(a,l.form.error)),u(i,e)};me(q,i=>{var e;(e=l.form)!=null&&e.error&&i(re)})}var g=o(q,2),h=r(g),w=o(r(h),2);Z(w),t(h);var x=o(h,2),D=r(x),P=o(r(D),2);Z(P),t(D),ce(2),t(x);var I=o(x,2),y=r(I),n=o(r(y),2),E=r(n);E.value=E.__value="";var te=o(E);W(te,17,()=>l.data.rubros,X,(i,e)=>{var a=fe(),c=r(a,!0);t(a);var s={};p(()=>{b(c,d(e).nombre),s!==(s=d(e).id)&&(a.value=(a.__value=d(e).id)??"")}),u(i,a)}),t(n);var R;$(n),t(y);var j=o(y,2),v=o(r(j),2),N=r(v);N.value=N.__value="";var oe=o(N);W(oe,17,()=>l.data.proveedores,X,(i,e)=>{var a=ge(),c=r(a,!0);t(a);var s={};p(()=>{b(c,d(e).nombre),s!==(s=d(e).id)&&(a.value=(a.__value=d(e).id)??"")}),u(i,a)}),t(v);var O;$(v),t(j),t(I);var C=o(I,6),T=o(r(C),2),S=r(T);S.value=S.__value="PENDIENTE";var V=o(S);V.value=V.__value="VERIFICADO",t(T),t(C);var A=o(C,2),k=o(r(A),2),ie=r(k,!0);t(k),t(A),t(g),ue(g,(i,e)=>{var a;return(a=be)==null?void 0:a(i,e)},()=>()=>(U(m,!0),async({update:i})=>{U(m,!1),await i()})),t(f),p(i=>{var e,a,c,s,F,G,M,z,B,H,J,K,L,Q;Y(w,((a=(e=l.form)==null?void 0:e.data)==null?void 0:a.concepto)??""),Y(P,i),R!==(R=((s=(c=l.form)==null?void 0:c.data)==null?void 0:s.rubroId)??"")&&(n.value=(n.__value=((G=(F=l.form)==null?void 0:F.data)==null?void 0:G.rubroId)??"")??"",ee(n,((z=(M=l.form)==null?void 0:M.data)==null?void 0:z.rubroId)??"")),O!==(O=((H=(B=l.form)==null?void 0:B.data)==null?void 0:H.proveedorId)??"")&&(v.value=(v.__value=((K=(J=l.form)==null?void 0:J.data)==null?void 0:K.proveedorId)??"")??"",ee(v,((Q=(L=l.form)==null?void 0:L.data)==null?void 0:Q.proveedorId)??"")),k.disabled=d(m),b(ie,d(m)?"Guardando...":"Registrar Egreso")},[()=>new Date().toISOString().split("T")[0]]),u(ae,f),se()}export{qe as component};
