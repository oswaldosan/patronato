import"../chunks/Bzak7iHL.js";import{d as Ka,p as Qa,l as Q,q as Wa,f as Xa,t as x,i as W,g as d,a as n,b as Ya,v as Za,e,h as v,j as p,k as m,s as t,$ as $a,r as a,n as _,w as ae,o as ee,u as te}from"../chunks/CpxVo7Xb.js";import{i as g}from"../chunks/C1oSKhUs.js";import{e as ie,i as re}from"../chunks/6RaR5WWk.js";import{h as se}from"../chunks/FiqctlaF.js";import{a as de,e as le}from"../chunks/DwtWQrsL.js";import{a as u,b as oe,s as Na,r as c}from"../chunks/CWn9fQy-.js";import{a as ka}from"../chunks/XiZwx-Ce.js";import{B as ne}from"../chunks/DlNLqZHT.js";import{a as Da,e as ve,b as ce}from"../chunks/DJc31okB.js";var me=m('<div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm"> </div>'),be=m('<div class="mb-6 p-4 bg-green-50 border border-green-200 rounded-xl text-green-700 text-sm">Donante actualizado correctamente</div>'),pe=m('<div><label for="nombreNegocio" class="label">Nombre del negocio/empresa</label> <input type="text" id="nombreNegocio" name="nombreNegocio" class="input"/></div>'),ue=m('<div class="p-6 text-center text-slate-500 text-sm">Sin aportes registrados</div>'),fe=m('<a class="block p-4 hover:bg-slate-50 transition-colors"><div class="flex items-center justify-between"><div><p class="text-sm text-slate-500"> </p> <p class="text-xs text-slate-400"> </p></div> <div class="text-right"><p class="font-bold text-slate-900"> </p> <!></div></div></a>'),_e=m('<div class="divide-y divide-slate-100 max-h-96 overflow-y-auto"></div>'),xe=m('<div class="fixed inset-0 z-50 flex items-center justify-center p-4"><div class="absolute inset-0 bg-black/50"></div> <div class="relative bg-white rounded-2xl p-6 max-w-sm w-full"><h3 class="text-lg font-display font-semibold text-slate-900 mb-2">¿Eliminar donante?</h3> <p class="text-slate-600 mb-6">Esta acción no se puede deshacer. Solo puedes eliminar donantes sin aportes registrados.</p> <div class="flex justify-end gap-3"><button class="btn btn-secondary">Cancelar</button> <form method="POST" action="?/delete"><button type="submit" class="btn btn-danger">Eliminar</button></form></div></div></div>'),ge=m('<div class="max-w-4xl mx-auto"><div class="mb-8"><a href="/admin/donantes" class="text-sm text-slate-600 hover:text-primary-600 mb-2 inline-block">← Volver a donantes</a> <div class="flex items-center justify-between"><h1 class="page-title">Editar Donante</h1> <button class="btn btn-danger btn-sm">Eliminar</button></div></div> <!> <!> <div class="grid grid-cols-1 lg:grid-cols-3 gap-8"><div class="lg:col-span-2"><form method="POST" action="?/update" class="card p-6 space-y-6"><div><label class="label">Tipo de donante</label> <div class="flex gap-4"><label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="tipo" class="w-4 h-4 text-primary-600"/> <span>Persona</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="tipo" class="w-4 h-4 text-primary-600"/> <span>Empresa</span></label></div></div> <div><label for="nombre" class="label"> </label> <input type="text" id="nombre" name="nombre" class="input" required=""/></div> <div><label for="identificacion" class="label">Identidad / RTN *</label> <input type="text" id="identificacion" name="identificacion" class="input" required=""/> <p class="text-xs text-slate-500 mt-1">Debe coincidir con el documento oficial.</p></div> <!> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div><label for="telefono" class="label">Teléfono</label> <input type="tel" id="telefono" name="telefono" class="input"/></div> <div><label for="email" class="label">Email</label> <input type="email" id="email" name="email" class="input"/></div></div> <div><label for="direccion" class="label">Dirección</label> <input type="text" id="direccion" name="direccion" class="input"/></div> <div><label for="notas" class="label">Notas</label> <textarea id="notas" name="notas" rows="3" class="input"></textarea></div> <div><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="activo" class="w-4 h-4 rounded text-primary-600"/> <span class="text-sm font-medium">Donante activo</span></label></div> <div class="flex justify-end gap-3 pt-4 border-t border-slate-200"><button type="submit" class="btn btn-primary"> </button></div></form></div> <div class="space-y-6"><div class="card p-6"><h3 class="font-display font-semibold text-slate-800 mb-4">Resumen</h3> <div class="space-y-4"><div><p class="text-sm text-slate-500">Total donado</p> <p class="text-2xl font-bold text-primary-600"> </p></div> <div><p class="text-sm text-slate-500">Total aportes</p> <p class="text-lg font-semibold text-slate-900"> </p></div></div> <div class="mt-4 pt-4 border-t border-slate-200"><a class="btn btn-primary w-full">+ Nuevo Aporte</a></div></div> <div class="card overflow-hidden"><div class="px-6 py-4 border-b border-slate-200"><h3 class="font-display font-semibold text-slate-800">Historial</h3></div> <!></div></div></div></div> <!>',1);function Re(Aa,s){Qa(s,!0);const X=[];let h=Q(!1),f=Q(Wa(s.data.donante.tipo)),y=Q(!1);const Pa=i=>{switch(i){case"VERIFICADO":return"success";case"PENDIENTE":return"warning";case"ANULADO":return"danger";default:return"default"}};var Y=ge();se("8u2la7",i=>{Za(()=>{$a.title=`Editar ${(s.data.donante.nombreNegocio||s.data.donante.nombre)??""} - Admin`})});var k=Xa(Y),D=e(k),Z=t(e(D),2),Sa=t(e(Z),2);a(Z),a(D);var $=t(D,2);{var Ta=i=>{var r=me(),l=e(r,!0);a(r),x(()=>v(l,s.form.error)),n(i,r)};g($,i=>{var r;(r=s.form)!=null&&r.error&&i(Ta)})}var aa=t($,2);{var Ra=i=>{var r=be();n(i,r)};g(aa,i=>{var r;(r=s.form)!=null&&r.success&&i(Ra)})}var ea=t(aa,2),A=e(ea),P=e(A),S=e(P),ta=t(e(S),2),T=e(ta),E=e(T);c(E),E.value=E.__value="PERSONA",_(2),a(T);var ia=t(T,2),w=e(ia);c(w),w.value=w.__value="EMPRESA",_(2),a(ia),a(ta),a(S);var R=t(S,2),j=e(R),ja=e(j);a(j);var ra=t(j,2);c(ra),a(R);var C=t(R,2),sa=t(e(C),2);c(sa),_(2),a(C);var da=t(C,2);{var Ca=i=>{var r=pe(),l=t(e(r),2);c(l),a(r),x(()=>u(l,s.data.donante.nombreNegocio??"")),n(i,r)};g(da,i=>{d(f)==="EMPRESA"&&i(Ca)})}var O=t(da,2),I=e(O),la=t(e(I),2);c(la),a(I);var oa=t(I,2),na=t(e(oa),2);c(na),a(oa),a(O);var q=t(O,2),va=t(e(q),2);c(va),a(q);var M=t(q,2),ca=t(e(M),2);ae(ca),a(M);var V=t(M,2),ma=e(V),ba=e(ma);c(ba),_(2),a(ma),a(V);var pa=t(V,2),z=e(pa),Oa=e(z,!0);a(z),a(pa),a(P),de(P,(i,r)=>{var l;return(l=le)==null?void 0:l(i,r)},()=>()=>(p(h,!0),async({update:i})=>{p(h,!1),await i()})),a(A);var ua=t(A,2),B=e(ua),G=t(e(B),2),L=e(G),fa=t(e(L),2),Ia=e(fa,!0);a(fa),a(L);var _a=t(L,2),xa=t(e(_a),2),qa=e(xa,!0);a(xa),a(_a),a(G);var ga=t(G,2),Ma=e(ga);a(ga),a(B);var ha=t(B,2),Va=t(e(ha),2);{var za=i=>{var r=ue();n(i,r)},Ba=i=>{var r=_e();ie(r,21,()=>s.data.aportes,re,(l,o)=>{var b=fe(),N=e(b),F=e(N),H=e(F),Fa=e(H,!0);a(H);var ya=t(H,2),Ha=e(ya,!0);a(ya),a(F);var Ea=t(F,2),U=e(Ea),Ua=e(U,!0);a(U);var Ja=t(U,2);{let J=te(()=>Pa(d(o).estado));ne(Ja,{get variant(){return d(J)},children:(K,he)=>{_();var wa=ee();x(()=>v(wa,ve[d(o).estado])),n(K,wa)},$$slots:{default:!0}})}a(Ea),a(N),a(b),x((J,K)=>{Na(b,"href",`/admin/aportes/${d(o).id??""}`),v(Fa,J),v(Ha,d(o).rubro),v(Ua,K)},[()=>ce(d(o).fecha),()=>Da(d(o).monto)]),n(l,b)}),a(r),n(i,r)};g(Va,i=>{s.data.aportes.length===0?i(za):i(Ba,!1)})}a(ha),a(ua),a(ea),a(k);var Ga=t(k,2);{var La=i=>{var r=xe(),l=e(r),o=t(l,2),b=t(e(o),4),N=e(b);_(2),a(b),a(o),a(r),W("click",l,()=>p(y,!1)),W("click",N,()=>p(y,!1)),n(i,r)};g(Ga,i=>{d(y)&&i(La)})}x(i=>{v(ja,`${d(f)==="EMPRESA"?"Nombre del representante":"Nombre completo"} *`),u(ra,s.data.donante.nombre),u(sa,s.data.donante.identificacion),u(la,s.data.donante.telefono??""),u(na,s.data.donante.email??""),u(va,s.data.donante.direccion??""),u(ca,s.data.donante.notas??""),oe(ba,s.data.donante.activo),z.disabled=d(h),v(Oa,d(h)?"Guardando...":"Guardar Cambios"),v(Ia,i),v(qa,s.data.aportes.length),Na(Ma,"href",`/admin/aportes/nuevo?donante=${s.data.donante.id??""}`)},[()=>Da(s.data.totalDonado)]),W("click",Sa,()=>p(y,!0)),ka(X,[],E,()=>d(f),i=>p(f,i)),ka(X,[],w,()=>d(f),i=>p(f,i)),n(Aa,Y),Ya()}Ka(["click"]);export{Re as component};
