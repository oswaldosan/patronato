import"../chunks/Bzak7iHL.js";import{i as Se}from"../chunks/B3baiw5N.js";import{p as Ne,y as Te,z as ke,f as ze,t as q,a as x,b as Ee,e as a,s as r,k as u,j as Re,A as f,r as e,n as ae,B as l,h as c,g as t,C as je}from"../chunks/CpxVo7Xb.js";import{i as qe}from"../chunks/C1oSKhUs.js";import{e as se,i as re}from"../chunks/6RaR5WWk.js";import{r as le,a as ie}from"../chunks/CWn9fQy-.js";import{s as _}from"../chunks/Dj1_M-cw.js";import{p as Fe}from"../chunks/Dp-_RygU.js";var Pe=u('<article class="stat-card"><p class="text-xs font-semibold text-slate-500 uppercase tracking-wide"> </p> <p> </p> <p class="stat-label"> </p></article>'),Me=u('<div class="card p-8 text-center text-slate-500">No hay usuarios registrados a칰n. Utiliza el formulario superior para crear el primero.</div>'),Ue=u('<tr><td><p class="font-semibold text-slate-900"> </p> <p class="text-xs text-slate-500"> </p></td><td><p> </p> <p class="text-xs text-slate-400"> </p></td><td><span> </span></td><td><span> </span></td><td> </td><td><div class="flex flex-col gap-2 min-w-[220px]"><form method="POST" action="?/toggleActive" class="flex gap-2 items-center"><input type="hidden" name="id"/> <button type="submit"> </button></form> <form method="POST" action="?/resetPassword" class="flex gap-2 items-center"><input type="hidden" name="id"/> <input name="password" type="password" minlength="8" placeholder="Nueva contrase침a" required="" class="input"/> <button type="submit" class="btn btn-sm btn-outline">Actualizar</button></form></div></td></tr>'),Oe=u('<div class="table-container"><table class="table"><thead><tr><th>Nombre</th><th>Correo</th><th>Rol</th><th>Estado</th><th>Creado</th><th>Acciones</th></tr></thead><tbody></tbody></table></div>'),$e=u('<section class="mb-8"><div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between"><div><p class="text-sm font-semibold text-primary-600 uppercase tracking-wide">Control de accesos</p> <h1 class="page-title">Usuarios administrativos</h1> <p class="text-sm text-slate-500 mt-2">Registra y administra las personas autorizadas para cargar aportes, egresos y reportes.</p></div> <div class="bg-white border border-slate-200 rounded-2xl px-5 py-4 shadow-sm"><p class="text-xs font-semibold text-slate-500 uppercase tracking-wide">칔ltima actualizaci칩n</p> <p class="text-lg font-display text-slate-900"> </p></div></div></section> <section class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 mb-8"></section> <section class="card p-6 mb-10"><div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6"><div><h2 class="section-title">Crear nuevo usuario</h2> <p class="text-sm text-slate-500">Comparte el acceso institucional sin exponer la contrase침a maestra.</p></div> <p class="text-xs text-slate-400 bg-slate-100 rounded-full px-4 py-1 inline-flex items-center gap-1">游댏 Contrase침as se guardan cifradas autom치ticamente</p></div> <form method="POST" action="?/create" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><div><label class="label" for="name">Nombre completo</label> <input id="name" name="name" placeholder="Ej. Mar칤a Fern치ndez" required="" class="input"/></div> <div><label class="label" for="email">Correo institucional</label> <input id="email" name="email" type="email" placeholder="correo@comite.org" required="" class="input"/></div> <div><label class="label" for="password">Contrase침a temporal</label> <input id="password" name="password" type="password" minlength="8" placeholder="M칤nimo 8 caracteres" required="" class="input"/></div> <div><label class="label" for="role">Tipo de acceso</label> <select id="role" name="role" class="select"><option>Administraci칩n completa</option><option>Solo consulta</option></select></div> <div class="md:col-span-2 lg:col-span-4 flex flex-col sm:flex-row gap-3"><button type="submit" class="btn btn-primary flex-1">Registrar usuario</button> <p class="text-xs text-slate-400 flex items-center">Se enviar치 la contrase침a temporal por el canal que definas.</p></div></form></section> <section><div class="flex items-center justify-between mb-4"><h2 class="section-title">Listado de usuarios</h2> <span class="text-sm text-slate-500"> </span></div> <!></section>',1);function Qe(oe,F){Ne(F,!1);const P=je();let o=Fe(F,"data",8);const ce=new Intl.DateTimeFormat("es-HN",{dateStyle:"medium"}),ne=new Intl.DateTimeFormat("es-HN",{dateStyle:"medium",timeStyle:"short"}),M={ADMIN:{label:"Administrador",classes:"bg-primary-50 text-primary-700 border border-primary-100"},VIEWER:{label:"Consulta",classes:"bg-slate-100 text-slate-700 border border-slate-200"}},de=o().stats.total-o().stats.viewers,pe=[{label:"Usuarios totales",value:o().stats.total,accent:"text-slate-900",helper:"Registros en el sistema"},{label:"Activos",value:o().stats.activos,accent:"text-green-600",helper:"Pueden iniciar sesi칩n"},{label:"Inactivos",value:o().stats.inactivos,accent:"text-amber-600",helper:"Acceso suspendido"},{label:"Administradores",value:de,accent:"text-primary-600",helper:"Con rol completo"}],U=n=>ce.format(new Date(n));Te(()=>f(o()),()=>{Re(P,ne.format(new Date(o().generatedAt)))}),ke(),Se();var O=$e(),g=ze(O),$=a(g),H=r(a($),2),L=r(a(H),2),me=a(L,!0);e(L),e(H),e($),e(g);var h=r(g,2);se(h,5,()=>pe,re,(n,i)=>{var d=Pe(),p=a(d),C=a(p,!0);e(p);var s=r(p,2),v=a(s,!0);e(s);var m=r(s,2),b=a(m,!0);e(m),e(d),q(()=>{c(C,(t(i),l(()=>t(i).label))),_(s,1,(t(i),l(()=>`stat-value mt-2 ${t(i).accent}`))),c(v,(t(i),l(()=>t(i).value))),c(b,(t(i),l(()=>t(i).helper)))}),x(n,d)}),e(h);var y=r(h,2),V=r(a(y),2),W=r(a(V),6),B=r(a(W),2),w=a(B);w.value=w.__value="ADMIN";var G=r(w);G.value=G.__value="VIEWER",e(B),e(W),ae(2),e(V),e(y);var J=r(y,2),A=a(J),K=r(a(A),2),ve=a(K);e(K),e(A);var be=r(A,2);{var xe=n=>{var i=Me();x(n,i)},ue=n=>{var i=Oe(),d=a(i),p=r(a(d));se(p,5,()=>(f(o()),l(()=>o().users)),re,(C,s)=>{var v=Ue(),m=a(v),b=a(m),fe=a(b,!0);e(b);var Q=r(b,2),_e=a(Q);e(Q),e(m);var D=r(m),I=a(D),ge=a(I,!0);e(I);var X=r(I,2),he=a(X);e(X),e(D);var S=r(D),N=a(S),ye=a(N,!0);e(N),e(S);var T=r(S),k=a(T),we=a(k,!0);e(k),e(T);var z=r(T),Ae=a(z,!0);e(z);var Y=r(z),Z=a(Y),E=a(Z),R=a(E);le(R);var j=r(R,2),Ce=a(j,!0);e(j),e(E);var ee=r(E,2),te=a(ee);le(te),ae(4),e(ee),e(Z),e(Y),e(v),q((De,Ie)=>{c(fe,(t(s),l(()=>t(s).name))),c(_e,`ID: ${t(s),l(()=>t(s).id)??""}`),c(ge,(t(s),l(()=>t(s).email))),c(he,`칔ltimo cambio: ${De??""}`),_(N,1,(t(s),l(()=>`badge ${M[t(s).role].classes}`))),c(ye,(t(s),l(()=>M[t(s).role].label))),_(k,1,(t(s),l(()=>`badge ${t(s).activo?"badge-success":"badge-warning"}`))),c(we,(t(s),l(()=>t(s).activo?"Activo":"Inactivo"))),c(Ae,Ie),ie(R,(t(s),l(()=>t(s).id))),_(j,1,(t(s),l(()=>`btn btn-sm ${t(s).activo?"btn-secondary":"btn-primary"}`))),c(Ce,(t(s),l(()=>t(s).activo?"Desactivar":"Activar"))),ie(te,(t(s),l(()=>t(s).id)))},[()=>(t(s),l(()=>U(t(s).createdAt))),()=>(t(s),l(()=>U(t(s).createdAt)))]),x(C,v)}),e(p),e(d),e(i),x(n,i)};qe(be,n=>{f(o()),l(()=>o().users.length===0)?n(xe):n(ue,!1)})}e(J),q(()=>{c(me,t(P)),c(ve,`${f(o()),l(()=>o().users.length)??""} registros`)}),x(oe,O),Ee()}export{Qe as component};
