import"../chunks/Bzak7iHL.js";import{d as Me,p as He,f as Je,t as m,i as G,a as n,b as Ke,v as Qe,o as We,g as c,e as a,s as t,h as l,j as p,k as u,u as Xe,l as ye,$ as Ye,r as e,n as Ee,w as Ze}from"../chunks/CpxVo7Xb.js";import{i as g}from"../chunks/C1oSKhUs.js";import{e as Ie,i as we}from"../chunks/6RaR5WWk.js";import{h as $e}from"../chunks/FiqctlaF.js";import{a as ea,e as aa}from"../chunks/DwtWQrsL.js";import{a as x,r as E}from"../chunks/CWn9fQy-.js";import{s as ta}from"../chunks/C2yMkv0y.js";import{i as M,s as H}from"../chunks/DwYBmEoc.js";import{B as ra}from"../chunks/DlNLqZHT.js";import{a as sa,d as Ae,c as oa}from"../chunks/DJc31okB.js";var da=u('<div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm"> </div>'),ia=u('<div class="mb-6 p-4 bg-green-50 border border-green-200 rounded-xl text-green-700 text-sm"> </div>'),la=u("<option> </option>"),va=u("<option> </option>"),na=u('<div><p class="text-slate-500">Rubro</p> <p class="font-medium flex items-center gap-2"><span class="inline-flex w-2.5 h-2.5 rounded-full"></span> </p></div>'),ca=u('<form method="POST" action="?/verify"><button type="submit" class="btn btn-primary w-full">‚úì Verificar Egreso</button></form>'),ua=u('<form method="POST" action="?/cancel"><button type="submit" class="btn btn-secondary w-full">‚úó Anular Egreso</button></form>'),ma=u('<div class="fixed inset-0 z-50 flex items-center justify-center p-4"><div class="absolute inset-0 bg-black/50"></div> <div class="relative bg-white rounded-2xl p-6 max-w-sm w-full"><h3 class="text-lg font-display font-semibold text-slate-900 mb-2">¬øEliminar egreso?</h3> <p class="text-slate-600 mb-6">Esta acci√≥n no se puede deshacer.</p> <div class="flex justify-end gap-3"><button class="btn btn-secondary">Cancelar</button> <form method="POST" action="?/delete"><button type="submit" class="btn btn-danger">Eliminar</button></form></div></div></div>'),_a=u('<div class="max-w-4xl mx-auto"><div class="mb-8"><a href="/admin/egresos" class="text-sm text-slate-600 hover:text-primary-600 mb-2 inline-block">‚Üê Volver a egresos</a> <div class="flex items-center justify-between"><div><h1 class="page-title">Detalle del Egreso</h1> <p class="text-slate-600 mt-1"> </p></div> <!></div></div> <!> <!> <div class="grid grid-cols-1 lg:grid-cols-3 gap-8"><div class="lg:col-span-2"><form method="POST" action="?/update" class="card p-6 space-y-6"><div><label for="concepto" class="label">Concepto *</label> <input type="text" id="concepto" name="concepto" class="input" required=""/></div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div><label for="fecha" class="label">Fecha *</label> <input type="date" id="fecha" name="fecha" class="input" required=""/></div> <div><label for="monto" class="label">Monto *</label> <input type="number" id="monto" name="monto" step="0.01" min="0.01" class="input" required=""/></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div><label for="rubroId" class="label">Rubro *</label> <select id="rubroId" name="rubroId" class="select" required=""></select></div> <div><label for="proveedorId" class="label">Proveedor</label> <select id="proveedorId" name="proveedorId" class="select"><option>Sin proveedor registrado</option><!></select></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div><label for="referencia" class="label">Referencia</label> <input type="text" id="referencia" name="referencia" class="input"/></div> <div><label for="estado" class="label">Estado *</label> <select id="estado" name="estado" class="select" required=""><option>Pendiente</option><option>Verificado</option><option>Anulado</option></select></div></div> <div><label for="notas" class="label">Notas</label> <textarea id="notas" name="notas" rows="2" class="input"></textarea></div> <div class="flex justify-end gap-3 pt-4 border-t border-slate-200"><button type="submit" class="btn btn-primary"> </button></div></form></div> <div class="space-y-6"><div class="card p-6"><h3 class="font-display font-semibold text-slate-800 mb-4">Informaci√≥n</h3> <div class="space-y-4 text-sm"><div><p class="text-slate-500">Monto</p> <p class="text-2xl font-bold text-red-600"> </p></div> <!> <div><p class="text-slate-500">Creado</p> <p class="font-medium"> </p></div> <div><p class="text-slate-500">Actualizado</p> <p class="font-medium"> </p></div></div></div> <div class="card p-6 space-y-3"><h3 class="font-display font-semibold text-slate-800 mb-4">Acciones</h3> <!> <!> <button class="btn btn-danger w-full">üóë Eliminar</button></div></div></div></div> <!>',1);function Da(De,o){He(o,!0);let h=ye(!1),y=ye(!1);const Ne=s=>{switch(s){case"VERIFICADO":return"success";case"PENDIENTE":return"warning";case"ANULADO":return"danger";default:return"default"}};var J=_a();$e("1xmqodr",s=>{Qe(r=>{Ye.title=`Egreso #${r??""} - Admin`},[()=>o.data.egreso.id.slice(-6)])});var I=Je(J),w=a(I),K=t(a(w),2),A=a(K),Q=t(a(A),2),Pe=a(Q);e(Q),e(A);var ke=t(A,2);{let s=Xe(()=>Ne(o.data.egreso.estado));ra(ke,{get variant(){return c(s)},children:(r,d)=>{Ee();var i=We();m(()=>l(i,oa[o.data.egreso.estado])),n(r,i)},$$slots:{default:!0}})}e(K),e(w);var W=t(w,2);{var Ce=s=>{var r=da(),d=a(r,!0);e(r),m(()=>l(d,o.form.error)),n(s,r)};g(W,s=>{var r;(r=o.form)!=null&&r.error&&s(Ce)})}var X=t(W,2);{var Oe=s=>{var r=ia(),d=a(r,!0);e(r),m(()=>l(d,o.form.verified?"Egreso verificado correctamente":o.form.cancelled?"Egreso anulado":"Egreso actualizado correctamente")),n(s,r)};g(X,s=>{var r;(r=o.form)!=null&&r.success&&s(Oe)})}var Y=t(X,2),D=a(Y),N=a(D),P=a(N),Z=t(a(P),2);E(Z),e(P);var k=t(P,2),C=a(k),$=t(a(C),2);E($),e(C);var ee=t(C,2),ae=t(a(ee),2);E(ae),e(ee),e(k);var O=t(k,2),T=a(O),_=t(a(T),2);Ie(_,21,()=>o.data.rubros,we,(s,r)=>{var d=la(),i=a(d,!0);e(d);var v={};m(()=>{l(i,c(r).nombre),v!==(v=c(r).id)&&(d.value=(d.__value=c(r).id)??"")}),n(s,d)}),e(_);var te;M(_),e(T);var re=t(T,2),f=t(a(re),2),q=a(f);q.value=q.__value="";var Te=t(q);Ie(Te,17,()=>o.data.proveedores,we,(s,r)=>{var d=va(),i=a(d,!0);e(d);var v={};m(()=>{l(i,c(r).nombre),v!==(v=c(r).id)&&(d.value=(d.__value=c(r).id)??"")}),n(s,d)}),e(f);var se;M(f),e(re),e(O);var V=t(O,2),j=a(V),oe=t(a(j),2);E(oe),e(j);var de=t(j,2),b=t(a(de),2),R=a(b);R.value=R.__value="PENDIENTE";var S=t(R);S.value=S.__value="VERIFICADO";var ie=t(S);ie.value=ie.__value="ANULADO",e(b);var le;M(b),e(de),e(V);var L=t(V,2),ve=t(a(L),2);Ze(ve),e(L);var ne=t(L,2),z=a(ne),qe=a(z,!0);e(z),e(ne),e(N),ea(N,(s,r)=>{var d;return(d=aa)==null?void 0:d(s,r)},()=>()=>(p(h,!0),async({update:s})=>{p(h,!1),await s()})),e(D);var ce=t(D,2),F=a(ce),ue=t(a(F),2),U=a(ue),me=t(a(U),2),Ve=a(me,!0);e(me),e(U);var _e=t(U,2);{var je=s=>{var r=na(),d=t(a(r),2),i=a(d),v=t(i);e(d),e(r),m(()=>{ta(i,`background:${o.data.egreso.rubroColor}`),l(v,` ${o.data.egreso.rubroNombre??""}`)}),n(s,r)};g(_e,s=>{o.data.egreso.rubroNombre&&s(je)})}var B=t(_e,2),fe=t(a(B),2),Re=a(fe,!0);e(fe),e(B);var be=t(B,2),ge=t(a(be),2),Se=a(ge,!0);e(ge),e(be),e(ue),e(F);var pe=t(F,2),xe=t(a(pe),2);{var Le=s=>{var r=ca();n(s,r)};g(xe,s=>{o.data.egreso.estado==="PENDIENTE"&&s(Le)})}var he=t(xe,2);{var ze=s=>{var r=ua();n(s,r)};g(he,s=>{o.data.egreso.estado!=="ANULADO"&&s(ze)})}var Fe=t(he,2);e(pe),e(ce),e(Y),e(I);var Ue=t(I,2);{var Be=s=>{var r=ma(),d=a(r),i=t(d,2),v=t(a(i),4),Ge=a(v);Ee(2),e(v),e(i),e(r),G("click",d,()=>p(y,!1)),G("click",Ge,()=>p(y,!1)),n(s,r)};g(Ue,s=>{c(y)&&s(Be)})}m((s,r,d)=>{l(Pe,`ID: ${o.data.egreso.id??""}`),x(Z,o.data.egreso.concepto),x($,o.data.egreso.fecha),x(ae,o.data.egreso.monto),te!==(te=o.data.egreso.rubroId)&&(_.value=(_.__value=o.data.egreso.rubroId)??"",H(_,o.data.egreso.rubroId)),se!==(se=o.data.egreso.proveedorId??"")&&(f.value=(f.__value=o.data.egreso.proveedorId??"")??"",H(f,o.data.egreso.proveedorId??"")),x(oe,o.data.egreso.referencia??""),le!==(le=o.data.egreso.estado)&&(b.value=(b.__value=o.data.egreso.estado)??"",H(b,o.data.egreso.estado)),x(ve,o.data.egreso.notas??""),z.disabled=c(h),l(qe,c(h)?"Guardando...":"Guardar Cambios"),l(Ve,s),l(Re,r),l(Se,d)},[()=>sa(o.data.egreso.monto),()=>Ae(o.data.egreso.createdAt),()=>Ae(o.data.egreso.updatedAt)]),G("click",Fe,()=>p(y,!0)),n(De,J),Ke()}Me(["click"]);export{Da as component};
