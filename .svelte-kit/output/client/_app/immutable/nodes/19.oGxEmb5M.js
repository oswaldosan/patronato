import"../chunks/Bzak7iHL.js";import{d as Ee,p as Me,c as Pe,D as Te,f as me,a as p,b as Ae,aM as ze,e as a,s as t,r as e,t as O,i as T,k as j,h as I,m as Be,j as o,l as q,$ as Se,n as le,g as r,u as ge,o as De}from"../chunks/CpxVo7Xb.js";import{i as Y}from"../chunks/C1oSKhUs.js";import{e as qe,i as Ie}from"../chunks/6RaR5WWk.js";import{h as Ge}from"../chunks/FiqctlaF.js";import{a as he,e as ye}from"../chunks/DwtWQrsL.js";import{r as c,a as pe}from"../chunks/CWn9fQy-.js";import{s as Ne}from"../chunks/Dj1_M-cw.js";import{s as He}from"../chunks/C2yMkv0y.js";import{b as N,c as Ke}from"../chunks/XiZwx-Ce.js";import{B as Le}from"../chunks/DlNLqZHT.js";import{s as je}from"../chunks/B_TJrAGS.js";import{p as Re}from"../chunks/Dp-_RygU.js";import{a as Fe}from"../chunks/DJc31okB.js";var Je=j('<div class="flex items-center justify-between px-6 py-4 border-b border-slate-200"><h3 class="text-lg font-display font-semibold text-slate-900"> </h3> <button class="p-2 rounded-lg hover:bg-slate-100 transition-colors"><svg class="w-5 h-5 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Qe=j('<div class="px-6 py-4 border-t border-slate-200 bg-slate-50 rounded-b-2xl"><!></div>'),Ue=j('<div class="fixed inset-0 z-50 overflow-y-auto" role="dialog" aria-modal="true"><div class="fixed inset-0 bg-slate-900/50 backdrop-blur-sm animate-fade-in"></div> <div class="flex min-h-full items-center justify-center p-4"><div><!> <div class="px-6 py-4 max-h-[70vh] overflow-y-auto"><!></div> <!></div></div></div>');function we(be,l){Me(l,!0);let Q=Re(l,"open",15,!1),U=Re(l,"size",3,"md");const Z={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};function R(){var m;Q(!1),(m=l.onClose)==null||m.call(l)}function G(m){m.target===m.currentTarget&&R()}function x(m){m.key==="Escape"&&R()}var z=Pe();Te("keydown",ze,x);var H=me(z);{var ae=m=>{var re=Ue(),g=a(re),ie=t(g,2),V=a(ie),$=a(V);{var oe=B=>{var E=Je(),W=a(E),ve=a(W,!0);e(W);var ce=t(W,2);e(E),O(()=>I(ve,l.title)),T("click",ce,R),p(B,E)};Y($,B=>{l.title&&B(oe)})}var ee=t($,2),fe=a(ee);je(fe,()=>l.children),e(ee);var _e=t(ee,2);{var de=B=>{var E=Qe(),W=a(E);je(W,()=>l.footer),e(E),p(B,E)};Y(_e,B=>{l.footer&&B(de)})}e(V),e(ie),e(re),O(()=>Ne(V,1,`relative w-full ${Z[U()]??""} bg-white rounded-2xl shadow-2xl animate-scale-in`)),T("click",g,G),p(m,re)};Y(H,m=>{Q()&&m(ae)})}p(be,z),Ae()}Ee(["click"]);var Ve=j('<div class="p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm"> </div>'),We=j('<div class="p-4 bg-green-50 border border-green-200 rounded-xl text-green-700 text-sm">Operaci贸n realizada correctamente</div>'),Xe=j('<p class="text-xs text-slate-500"> </p>'),Ye=j('<div><div class="flex items-start justify-between mb-3"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold"> </div> <div><h3 class="font-medium text-slate-900"> </h3> <!></div></div> <!></div> <div class="grid grid-cols-2 gap-4 mb-4 text-sm"><div><p class="text-slate-500">Aportes</p> <p class="font-semibold text-slate-900"> </p></div> <div><p class="text-slate-500">Recaudado</p> <p class="font-semibold text-primary-600"> </p></div></div> <div class="flex gap-2 pt-3 border-t border-slate-100"><button class="flex-1 btn btn-sm btn-secondary">Editar</button> <button class="btn btn-sm btn-outline text-red-600 border-red-200 hover:bg-red-50">Eliminar</button></div></div>'),Ze=j('<form method="POST" action="?/create" class="space-y-4"><div><label for="new-nombre" class="label">Nombre *</label> <input type="text" id="new-nombre" name="nombre" class="input" required=""/></div> <div><label for="new-descripcion" class="label">Descripci贸n</label> <input type="text" id="new-descripcion" name="descripcion" class="input"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="new-color" class="label">Color</label> <div class="flex gap-2"><input type="color" id="new-color" name="color" class="w-12 h-10 rounded-lg cursor-pointer"/> <input type="text" class="input flex-1"/></div></div> <div><label for="new-orden" class="label">Orden</label> <input type="number" id="new-orden" name="orden" class="input" min="0"/></div></div> <div><label for="new-icono" class="label">cono (emoji)</label> <input type="text" id="new-icono" name="icono" class="input" placeholder=""/></div> <div class="flex justify-end gap-3 pt-4"><button type="button" class="btn btn-secondary">Cancelar</button> <button type="submit" class="btn btn-primary">Crear</button></div></form>'),$e=j('<form method="POST" action="?/update" class="space-y-4"><input type="hidden" name="id"/> <div><label for="edit-nombre" class="label">Nombre *</label> <input type="text" id="edit-nombre" name="nombre" class="input" required=""/></div> <div><label for="edit-descripcion" class="label">Descripci贸n</label> <input type="text" id="edit-descripcion" name="descripcion" class="input"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="edit-color" class="label">Color</label> <div class="flex gap-2"><input type="color" id="edit-color" name="color" class="w-12 h-10 rounded-lg cursor-pointer"/> <input type="text" class="input flex-1"/></div></div> <div><label for="edit-orden" class="label">Orden</label> <input type="number" id="edit-orden" name="orden" class="input" min="0"/></div></div> <div><label for="edit-icono" class="label">cono (emoji)</label> <input type="text" id="edit-icono" name="icono" class="input" placeholder=""/></div> <div><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="activo" class="w-4 h-4 rounded text-primary-600"/> <span class="text-sm font-medium">Rubro activo</span></label></div> <div class="flex justify-end gap-3 pt-4"><button type="button" class="btn btn-secondary">Cancelar</button> <button type="submit" class="btn btn-primary">Guardar</button></div></form>'),et=j('<p class="text-slate-600 mb-6">Esta acci贸n no se puede deshacer. Solo puedes eliminar rubros sin aportes asociados.</p> <div class="flex justify-end gap-3"><button class="btn btn-secondary">Cancelar</button> <form method="POST" action="?/delete"><input type="hidden" name="id"/> <button type="submit" class="btn btn-danger">Eliminar</button></form></div>',1),tt=j('<div class="space-y-6"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"><div><h1 class="page-title">Rubros / Categor铆as</h1> <p class="text-slate-600 mt-1"> </p></div> <button class="btn btn-primary"><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Nuevo Rubro</button></div> <!> <!> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div></div> <!> <!> <!>',1);function ft(be,l){Me(l,!0);let Q=q(!1),U=q(null),Z=q(null),R=q(""),G=q(""),x=q("#22c55e"),z=q(""),H=q(0),ae=q(!0);function m(){o(R,""),o(G,""),o(x,"#22c55e"),o(z,""),o(H,l.data.rubros.length,!0),o(Q,!0)}function re(s){o(U,s,!0),o(R,s.nombre,!0),o(G,s.descripcion||"",!0),o(x,s.color,!0),o(z,s.icono||"",!0),o(H,s.orden,!0),o(ae,s.activo,!0)}function g(){o(Q,!1),o(U,null),o(Z,null)}var ie=tt();Ge("4i07c8",s=>{Be(()=>{Se.title="Rubros - Admin"})});var V=me(ie),$=a(V),oe=a($),ee=t(a(oe),2),fe=a(ee);e(ee),e(oe);var _e=t(oe,2);e($);var de=t($,2);{var B=s=>{var i=Ve(),b=a(i,!0);e(i),O(()=>I(b,l.form.error)),p(s,i)};Y(de,s=>{var i;(i=l.form)!=null&&i.error&&s(B)})}var E=t(de,2);{var W=s=>{var i=We();p(s,i)};Y(E,s=>{var i;(i=l.form)!=null&&i.success&&s(W)})}var ve=t(E,2);qe(ve,21,()=>l.data.rubros,Ie,(s,i)=>{var b=Ye(),f=a(b),w=a(f),_=a(w),h=a(_,!0);e(_);var u=t(_,2),v=a(u),y=a(v,!0);e(v);var k=t(v,2);{var S=P=>{var A=Xe(),ne=a(A,!0);e(A),O(()=>I(ne,r(i).descripcion)),p(P,A)};Y(k,P=>{r(i).descripcion&&P(S)})}e(u),e(w);var X=t(w,2);{let P=ge(()=>r(i).activo?"success":"danger");Le(X,{get variant(){return r(P)},children:(A,ne)=>{le();var ue=De();O(()=>I(ue,r(i).activo?"Activo":"Inactivo")),p(A,ue)},$$slots:{default:!0}})}e(f);var M=t(f,2),C=a(M),K=t(a(C),2),L=a(K,!0);e(K),e(C);var F=t(C,2),n=t(a(F),2),J=a(n,!0);e(n),e(F),e(M);var D=t(M,2),se=a(D),te=t(se,2);e(D),e(b),O((P,A)=>{Ne(b,1,`card p-5 hover:shadow-md transition-shadow ${r(i).activo?"":"opacity-60"}`),He(_,`background-color: ${r(i).color??""}`),I(h,P),I(y,r(i).nombre),I(L,r(i).totalAportes),I(J,A),te.disabled=r(i).totalAportes>0},[()=>r(i).icono||r(i).nombre.charAt(0),()=>Fe(r(i).totalRecaudado)]),T("click",se,()=>re(r(i))),T("click",te,()=>o(Z,r(i).id,!0)),p(s,b)}),e(ve),e(V);var ce=t(V,2);we(ce,{title:"Nuevo Rubro",onClose:g,get open(){return r(Q)},set open(s){o(Q,s,!0)},children:(s,i)=>{var b=Ze(),f=a(b),w=t(a(f),2);c(w),e(f);var _=t(f,2),h=t(a(_),2);c(h),e(_);var u=t(_,2),v=a(u),y=t(a(v),2),k=a(y);c(k);var S=t(k,2);c(S),e(y),e(v);var X=t(v,2),M=t(a(X),2);c(M),e(X),e(u);var C=t(u,2),K=t(a(C),2);c(K),e(C);var L=t(C,2),F=a(L);le(2),e(L),e(b),he(b,(n,J)=>{var D;return(D=ye)==null?void 0:D(n,J)},()=>()=>async({result:n,update:J})=>{n.type==="success"&&g(),await J()}),O(()=>pe(S,r(x))),N(w,()=>r(R),n=>o(R,n)),N(h,()=>r(G),n=>o(G,n)),N(k,()=>r(x),n=>o(x,n)),T("change",S,n=>o(x,n.currentTarget.value,!0)),N(M,()=>r(H),n=>o(H,n)),N(K,()=>r(z),n=>o(z,n)),T("click",F,g),p(s,b)},$$slots:{default:!0}});var ke=t(ce,2);{let s=ge(()=>!!r(U));we(ke,{get open(){return r(s)},title:"Editar Rubro",onClose:g,children:(i,b)=>{var f=Pe(),w=me(f);{var _=h=>{var u=$e(),v=a(u);c(v);var y=t(v,2),k=t(a(y),2);c(k),e(y);var S=t(y,2),X=t(a(S),2);c(X),e(S);var M=t(S,2),C=a(M),K=t(a(C),2),L=a(K);c(L);var F=t(L,2);c(F),e(K),e(C);var n=t(C,2),J=t(a(n),2);c(J),e(n),e(M);var D=t(M,2),se=t(a(D),2);c(se),e(D);var te=t(D,2),P=a(te),A=a(P);c(A),le(2),e(P),e(te);var ne=t(te,2),ue=a(ne);le(2),e(ne),e(u),he(u,(d,xe)=>{var Ce;return(Ce=ye)==null?void 0:Ce(d,xe)},()=>()=>async({result:d,update:xe})=>{d.type==="success"&&g(),await xe()}),O(()=>{pe(v,r(U).id),pe(F,r(x))}),N(k,()=>r(R),d=>o(R,d)),N(X,()=>r(G),d=>o(G,d)),N(L,()=>r(x),d=>o(x,d)),T("change",F,d=>o(x,d.currentTarget.value,!0)),N(J,()=>r(H),d=>o(H,d)),N(se,()=>r(z),d=>o(z,d)),Ke(A,()=>r(ae),d=>o(ae,d)),T("click",ue,g),p(h,u)};Y(w,h=>{r(U)&&h(_)})}p(i,f)},$$slots:{default:!0}})}var Oe=t(ke,2);{let s=ge(()=>!!r(Z));we(Oe,{get open(){return r(s)},title:"驴Eliminar rubro?",onClose:g,children:(i,b)=>{var f=et(),w=t(me(f),2),_=a(w),h=t(_,2),u=a(h);c(u),le(2),e(h),he(h,(v,y)=>{var k;return(k=ye)==null?void 0:k(v,y)},()=>()=>async({result:v,update:y})=>{v.type==="success"&&g(),await y()}),e(w),O(()=>pe(u,r(Z))),T("click",_,g),p(i,f)},$$slots:{default:!0}})}O(()=>I(fe,`${l.data.rubros.length??""} rubros registrados`)),T("click",_e,m),p(be,ie),Ae()}Ee(["click","change"]);export{ft as component};
